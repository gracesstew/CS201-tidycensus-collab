---
title: "tidycensus-collab-10-17-25"
format: html
editor: visual
---

```         
```

Interesting. With each point being a census tract, and a correlation coefficient (*R*) of -0.39, what is the relationship between poverty and education at the tract level in Honolulu County?

------------------------------------------------------------------------

## Challenge Time!!

### Tallen and Grace

This could be a useful reference: <https://walker-data.com/census-r/index.html>

Replace family poverty with another variable and:

1.  Map it
2.  Show the variable over time
3.  Show the variable's relationship with education (or another variable of your choosing)
4.  Describe what you found

Directions:

1.  One person save as tidycensus_intro-collab.Rmd, commit & push. The other person pull!

2.  Take turns! Who will do what? Be careful not to overwrite one another.

    -   I will be looking for at least 4 exchanges

3.  Paste your challenge answers below

REMEMBER! [Pull]{.underline} before working in the `-collab.qmd` file. [Save, Commit, and Push]{.underline} your changes when you are done. The next person should [Pull]{.underline} before working, and so on.

### Tidy Census Collaboration: Tallen Vidal and Grace Stewart

### Import Data

```{r}
library(tidycensus)  # star of the show, what we will use to import data
library(tidyverse) # you know her
library(reactable) # makes nice looking, interactive tables
library(ggiraph) # makes interactive graphs and maps
library(ggpubr) # does some statistics and prints the results on our graphs
options(progress_enabled = FALSE)
```

```{r}
census_api_key("3ddbca3bc661c490a8075e5a9417a4d63f686900")
acs_2023_variables <- load_variables(2023, "acs5/profile")
reactable(acs_2023_variables, filterable = TRUE, showPageSizeOptions = TRUE, minRows = 10)
```

Investigating (insert variable here) on Oahu at the census tract level.

```{r}
# get the data
texas_poverty <- get_acs(
  geography = "tract",
  variables = c(percent_poverty = "DP03_0119P"),
  state = "TX",
  #county = "Dallas",
  geometry = TRUE,
  output = "wide" )
#  year = 2023) %>% 
#  dplyr::filter(GEOID != "15003981200" & GEOID !="15003981900")
```

### Mapping

```{r}
# MAP IT
texas_poverty_map <- ggplot(texas_poverty) +
  geom_sf_interactive(
    aes(
      fill = percent_povertyE,
      tooltip = paste(NAME, ": ", percent_povertyE, "%"),
      data_id = NAME)) +
  scale_fill_viridis_c(option = "inferno") +
  theme_void() 

girafe(ggobj = texas_poverty_map, width = 700, height = 400)
```

### Time Series

```{r}
tx_years <- 2014:2023 # specify years
names(tx_years) <- tx_years

tx_poverty_2014_2023 <- map_dfr(tx_years, ~{
  get_acs(
    geography = "county",
    variables = c(percent_poverty = "DP03_0119P"),
    state = "TX",
    county = "Austin",
    year = .x,
    survey = "acs5")}, .id = "year")
```

```{r}
#plot time series
ggplot(tx_poverty_2014_2023, aes(x = year, y = estimate, group = 1)) + 
  geom_ribbon(aes(ymax = estimate + moe, ymin = estimate - moe), 
              fill = "magenta",
              alpha = 0.4) + 
  geom_line(color = "magenta") + 
  geom_point(color = "magenta", size = 2) + 
  theme_minimal() + 
  labs(title = "Austin Poverty Rate (ACS Rolling 5-year estimates)",
       x = "ACS Release Year (5-year window)",
       y = "Percent in Poverty",
       caption = "Shaded area represents margin of error around the estimate")
```

### Scatter plot

```{r}
#get data for scatterplot
texas_family_poverty_college_education <- get_acs(
  geography = "tract",
  variables = c(percent_poverty = "DP03_0119P",
                percent_BA = "DP02_0068P"),
  state = "TX",
  county = "Austin",
  geometry = TRUE,
  output = "wide",
  year = 2023) %>% 
  dplyr::filter(GEOID != "15003981200" & GEOID !="15003981900")
```

```{r}
#scatter plot
ggplot(texas_family_poverty_college_education, aes(x = percent_povertyE,y = percent_BAE)) +
  geom_point() +
  geom_smooth() + # adds a regression line (LOESS)
  stat_cor() + # prints R and p
  theme_minimal() + 
  labs(title = "Comparing Rates of Higher Education to Poverty, Austin County",
       subtitle = "ACS 5-year, 2023 release",
       x = "Percent of Families Living Below the Poverty Line",
       y = "Percent with a BA or higher",
       caption = "Shaded area represents margin of error around the estimate")
```

### Description/Summary:

Looking at the map we created, throughout all of Texas, the county with the highest percentage of families with incomes below the poverty line is "Presidio County". This specific county has 52.6% of the families with income below the poverty line. I also noticed that many of the smaller counties in the lower region of the state had more ocurrences of higher percentages. Looking at the poverty time series, it seems that Austin had the lowest poverty rate in 2018, unfortunately the poverty rate is beginning to rise as of 2022 and is at its highest in 2023. Lastly, according to our scatter plot there is little to no relationship between education level and poverty in Austin. This scatter plot admittedly has a high margin of error which is strange and also there are very few points projected on this scatter plot. While this visualization was less effective than our other ones, the visualizations that were more effective were able to provide with a good amount of information regarding Poverty in Texas in terms of EDA.
