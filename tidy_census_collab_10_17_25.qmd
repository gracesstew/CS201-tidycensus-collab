---
title: "tidycensus-collab-10-17-25"
format: html
editor: visual
---

```         
```

Interesting. With each point being a census tract, and a correlation coefficient (*R*) of -0.39, what is the relationship between poverty and education at the tract level in Honolulu County?

------------------------------------------------------------------------

## Challenge Time!!

This could be a useful reference: <https://walker-data.com/census-r/index.html>

Replace family poverty with another variable and:

1.  Map it
2.  Show the variable over time
3.  Show the variable's relationship with education (or another variable of your choosing)
4.  Describe what you found

Directions:

1.  One person save as tidycensus_intro-collab.Rmd, commit & push. The other person pull!

2.  Take turns! Who will do what? Be careful not to overwrite one another.

    -   I will be looking for at least 4 exchanges

3.  Paste your challenge answers below

REMEMBER! [Pull]{.underline} before working in the `-collab.qmd` file. [Save, Commit, and Push]{.underline} your changes when you are done. The next person should [Pull]{.underline} before working, and so on.

### Tidy Census Collaboration: Tallen Vidal and Grace Stewart

### Import Data

```{r}
library(tidycensus)  # star of the show, what we will use to import data
library(tidyverse) # you know her
library(reactable) # makes nice looking, interactive tables
library(ggiraph) # makes interactive graphs and maps
library(ggpubr) # does some statistics and prints the results on our graphs
options(progress_enabled = FALSE)
```

```{r}
census_api_key("3ddbca3bc661c490a8075e5a9417a4d63f686900")
acs_2023_variables <- load_variables(2023, "acs5/profile")
reactable(acs_2023_variables, filterable = TRUE, showPageSizeOptions = TRUE, minRows = 10)
```

Investigating (insert variable here) on Oahu at the census tract level.

```{r}
# get the data
texas_poverty <- get_acs(
  geography = "tract",
  variables = c(percent_poverty = "DP03_0119P"),
  state = "TX",
  #county = "Dallas",
  geometry = TRUE,
  output = "wide" )
#  year = 2023) %>% 
#  dplyr::filter(GEOID != "15003981200" & GEOID !="15003981900")
```

### Mapping

```{r}
# MAP IT
texas_poverty_map <- ggplot(texas_poverty) +
  geom_sf_interactive(
    aes(
      fill = percent_povertyE,
      tooltip = paste(NAME, ": ", percent_povertyE, "%"),
      data_id = NAME)) +
  scale_fill_viridis_c(option = "inferno") +
  theme_void() 

girafe(ggobj = texas_poverty_map, width = 700, height = 400)
```

### Time Series

```{r}
tx_years <- 2014:2023 # specify years
names(years) <- years

tx_poverty_2014_2023 <- map_dfr(years, ~{
  get_acs(
    geography = "county",
    variables = c(percent_poverty = "DP03_0119P"),
    state = "TX",
    county = "Austin",
    year = .x,
    survey = "acs5")}, .id = "year")
```

```{r}
ggplot(tx_poverty_2014_2023, aes(x = year, y = estimate, group = 1)) + 
  geom_ribbon(aes(ymax = estimate + moe, ymin = estimate - moe), 
              fill = "steelblue",
              alpha = 0.4) + 
  geom_line(color = "steelblue") + 
  geom_point(color = "steelblue", size = 2) + 
  theme_minimal() + 
  labs(title = "Austin County Poverty Rate (ACS Rolling 5-year estimates)",
       x = "ACS Release Year (5-year window)",
       y = "Percent in Poverty",
       caption = "Shaded area represents margin of error around the estimate")
```

### Scatter plot

```{r}

```

### Description/Summary:
